<cx-view #view *ngIf="code$ | async as userCode">
  <h3>
    <a
      class="link"
      [routerLink]="
        { cxRoute: 'userDetails', params: { customerId: userCode } } | cxUrl
      "
      (click)="view.toggle()"
    >
      <cx-icon type="CARET_LEFT"></cx-icon>
    </a>
    <span>{{
      'user.approver.header' | cxTranslate: { code: name$ | async }
    }}</span>
  </h3>

  <div class="actions">
    <!--    <a-->
    <!--      class="link"-->
    <!--      [routerLink]="-->
    <!--        {-->
    <!--          cxRoute: 'userCreate'-->
    <!--        } | cxUrl-->
    <!--      "-->
    <!--    >-->
    <!--      {{ 'user.approvers.new' | cxTranslate }}-->
    <!--    </a>-->
    <a
      class="link"
      [routerLink]="
        {
          cxRoute: 'userAssignApprovers',
          params: { customerId: userCode }
        } | cxUrl
      "
    >
      {{ 'user.approver.assign' | cxTranslate }}
    </a>
  </div>
  <section>
    <cx-table
      *ngIf="dataTable$ | async as dataTable; else emptyList"
      [dataset]="dataTable"
    >
    </cx-table>
  </section>

  <ng-template #emptyList>
    <p class="instruction is-empty">
      {{ 'organization.messages.emptyList' | cxTranslate }}
    </p>
  </ng-template>

  <ng-template cxOutletRef="table.userApprovers.data.summary" let-model>
    <h3>{{ model.name }}</h3>
    <small
      >{{ model.email }}
      <span *ngFor="let role of model.roles">
        &nbsp;â€¢ {{ 'organization.userRoles.' + role | cxTranslate }}
      </span>
    </small>
  </ng-template>

  <ng-template cxOutletRef="table.userApprovers.data.unassign" let-model>
    <button class="button" (click)="unassign(model)">
      <cx-icon type="CLOSE"></cx-icon>
    </button>
  </ng-template>

  <ng-template cxOutletRef="table.userApprovers.data.link" let-model>
    <a
      class="link"
      [routerLink]="
        {
          cxRoute: 'userDetails',
          params: model
        } | cxUrl
      "
    >
      <cx-icon class="open-out" type="LINK_OUT"></cx-icon>
    </a>
  </ng-template>
</cx-view>

<router-outlet></router-outlet>
